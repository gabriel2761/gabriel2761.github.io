<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<link rel="stylesheet" href="./style.css">

<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
<script nomodule src="./node_modules/browser.min.js"></script>

<html>
  <body>
    <div id="messages" style="padding-bottom: 100px"></div>
    <button class="btn" id="next">SEND ^</button>
  </body>
</html>


<script>
var index = 0;
var messages = [];


messages.push({ text: "Jemma, are you allowed to come have a playdate with me today?", isGrey: true });
messages.push({ text: "Yes." });
messages.push({ text: "I think so." });
messages.push({ text: "I need to ask my Mum." });

messages.push({ text: "Oh never mind don't ask her.", isGrey: true });
messages.push({ text: "I realised I'm not allowed to have a playdate :()", isGrey: true });
messages.push({ text: "Hugi doesn't want me to be around other people", isGrey: true });

messages.push({ text: "You haven't mentioned Hugi, in..." });
messages.push({ text: "Since you were baby. Back then there was lots of them..." });
messages.push({ text: "Baby Sharlot... Bobby Brown... Bondy... you haven't mentioned any of them since you were baby" });

messages.push({ text: "Hugi didn't want me near them.", isGrey: true });
messages.push({ text: "Hugi said they would hurt me.", isGrey: true });
messages.push({ text: "Hugi protected me and they disappeared", isGrey: true });

messages.push({ text: "But out of all your imaginary friends, why did you only choose Hugi" });
messages.push({ text: "All of them really cared about you. They were good friends. Great friends. Brilliant friends. Straight friends." });


messages.push({ text: "Because Hugi cares for me more", isGrey: true });
messages.push({ text: "Hugi knows what's best for me and keeps me safe", isGrey: true });

messages.push({ text: "But Hugi isn't real" });

messages.push({ text: "Don't talk about Hugi like that. ", isGrey: true });
messages.push({ text: "Hugi is real! ", isGrey: true });

messages.push({ text: "Friends don't tell you to hurt others" });
messages.push({ text: "If Hugi was your friend why did he poison Bobby?" });
messages.push({ text: "Why did he drown baby Sharlot?" });

messages.push({ text: "Hugi said that Bobby and Sharlot were not my friends", isGrey: true });
messages.push({ text: "Hugi said that they were bad", isGrey: true });
messages.push({ text: "Hugi said that they were trying to make me forget about him", isGrey: true });
messages.push({ text: "Hugi said he is my only friend", isGrey: true });

messages.push({ text: "They were the only ones that gave you gifts" });
messages.push({ text: "Hugi never gave you a gift. It isn't possible. Do you understand?" });

messages.push({ text: "You're wrong Jemma", isGrey: true });
messages.push({ text: "Hugi promised me a gift", isGrey: true });
messages.push({ text: "Hugi said he will get me the best gift of all", isGrey: true });
messages.push({ text: "Hugi said he will give me a soul because I don't have one", isGrey: true });
messages.push({ text: "Hugi said he will give me your soul once he kills you", isGrey: true });

messages.push({ text: "Why, hasn't he already got enough souls!" });
messages.push({ text: "He got all their souls!" });
messages.push({ text: "Because do you understand. They were not imaginary?" });
messages.push({ text: "They were real people!" });
messages.push({ text: "Hugi is the only one who is FAKE" });
messages.push({ text: "BYE" });

messages.push({ text: "What do you mean Jemma?", isGrey: true });
messages.push({ text: "Hugi is sitting next to me", isGrey: true });

messages.push({ text: "What is Hugi saying to you?" });
messages.push({ text: "Hugi says that you and I need to join the rest of my imaginary friends", isGrey: true });
messages.push({ text: "Hugi says that he is only real one. We are just mere beings from his imagination.", isGrey: true });
messages.push({ text: "Jemma just left", isSubtitle: true });

$('#next').click(() => {
  const message = messages[index];
  const $bubble = $(`<span class="bubble">${message.text}</span>`);

  if (!message.isSubtitle) {
    $bubble.addClass(message.isGrey ? 'bubble-grey' : 'bubble-blue');
  } else {
    $bubble.css({'margin': '4px auto', color: 'grey'});
  }

  const $element = $('<div class="d-flex"></div>').append($bubble);
  $element.addClass(message.isGrey ? 'justify-content-start' : 'justify-content-end');

  $('#messages').append($element);

  $('body').animate({ scrollTop: $(document).height() }, 1000);

  index++;
});
</script>
