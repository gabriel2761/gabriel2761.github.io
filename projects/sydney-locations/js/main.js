function mapError(){$("#map").append('<div class="map-error"><h3>Google Maps has failed to load</h3><div>')}function initMap(){function e(){setTimeout(function(){google.maps.event.trigger(r,"resize")},600)}var a=new google.maps.InfoWindow,r=new google.maps.Map(document.getElementById("map"),{center:new google.maps.LatLng((-33.856657),151.21527),zoom:13,disableDefaultUI:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE}}),o=new google.maps.LatLngBounds;o.extend(new google.maps.LatLng((-33.903269),151.268455)),o.extend(new google.maps.LatLng((-33.792175),151.287564)),o.extend(new google.maps.LatLng((-33.867998),151.195245)),r.fitBounds(o);var n=function(){this.keyword=ko.observable(""),this.markers=ko.observableArray([]),this.results=ko.observableArray([])};n.prototype.addMarker=function(e,a,o){var n=this,t=new google.maps.Marker({position:new google.maps.LatLng(a,o),map:r,title:e});t.addListener("click",function(){n.getInfo(t)}),n.markers().push(t)},n.prototype.setMarkers=function(e){var a=this;e().forEach(function(e){a.results().indexOf(e)===-1&&e.setVisible(!0)})},n.prototype.clearMarkers=function(e){this.markers().forEach(function(a){e().indexOf(a)===-1&&a.setVisible(!1)})},n.prototype.search=function(){var e=this,a=e.keyword().toLowerCase();return results=ko.observableArray([]),e.markers().forEach(function(e){e.title.toLowerCase().indexOf(a)!==-1&&results().push(e)}),results().sort(function(e,r){var o,n,t,i,s=e.title.toLowerCase().split(" "),d=r.title.toLowerCase().split(" ");return s.forEach(function(e){(void 0===o&&e.indexOf(a)!=-1||e.indexOf(a)<o&&e.indexOf(a)!=-1)&&(o=e.indexOf(a),t=s.indexOf(e))}),d.forEach(function(e){(void 0===n&&e.indexOf(a)!=-1||e.indexOf(a)<n&&e.indexOf(a)!=-1)&&(n=e.indexOf(a),i=d.indexOf(e))}),o<n?-1:o>n?1:t<i?-1:t>n?1:0}),e.clearMarkers(results),e.setMarkers(results),e.results=results,results},n.prototype.click=function(e){this.getInfo(this.results()[e()])},n.prototype.getInfo=function(e){e.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){e.setAnimation(null)},1450),a.setContent('<i class="fa fa-circle-o-notch fa-spin"></i>'),a.open(r,e),$.ajax({url:"https://en.wikipedia.org/w/api.php?action=opensearch&search="+e.title+"&format=json",dataType:"jsonp"}).done(function(o){a.setContent("<h2>"+o[0]+"</h2><p>"+o[2][0]+'</p><a href="'+o[3][0]+'">Wikipedia</a>'),a.open(r,e)}).fail(function(o,n){a.setContent("Unable to retrieve data"),a.open(r,e)})};var t=new n;t.addMarker("Museum of Contemporary Art Australia",-33.859881,151.208903),t.addMarker("Art Gallery of New South Wales",-33.868791,151.217413),t.addMarker("Luna Park Sydney",-33.847677,151.209699),t.addMarker("Taronga Zoo",-33.843078,151.241928),t.addMarker("Sydney Opera House",-33.856657,151.21527),t.addMarker("Bondi Beach",-33.89152,151.276812),t.addMarker("Westfield Sydney",-33.869898,151.207694),t.addMarker("The Star (casino)",-33.867998,151.195245),t.addMarker("Hyde Park, Sydney",-33.873103,151.211276),t.addMarker("Royal Botanic Gardens, Sydney",-33.869162,151.215705),t.addMarker("Westfield Bondi Junction",-33.891621,151.250741),t.addMarker("Darling Harbour",-33.873483,151.200308),t.addMarker("Queen Victoria Building",-33.871713,151.206676),t.addMarker("Sea Life Sydney Aquarium",-33.870009,151.202205),t.addMarker("The Rocks, Sydney",-33.858965,151.207784),t.addMarker("Chinatown, Sydney",-33.877632,151.204641),t.addMarker("Sydney Town Hall",-33.873209,151.206593),t.addMarker("Bronte Beach",-33.903269,151.268455),t.addMarker("Blue Mountains (New South Wales)",-33.652956,150.442271),t.addMarker("Manly Beach",-33.792175,151.287564),t.markers().sort(function(e,a){return e.title<a.title?-1:e.title>a.title?1:0}),ko.applyBindings(t);var i=$("#list-pane");$("#hamburger-close").click(function(){i.removeClass("visible").addClass("hidden"),$("#hamburger-open").removeClass("setHidden"),e()}),$("#hamburger-open").click(function(){i.addClass("visible").removeClass("hidden"),$("#hamburger-open").addClass("setHidden"),e()})}